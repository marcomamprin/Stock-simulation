<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Price Simulation</title>
    <script async src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="script.js" defer></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Stock Price Simulation Tool</h1>
            <div>
                <button id="darkModeToggle">🌙 Dark Mode</button>
                <!-- <button id="currencyToggle" class="currency-toggle">€</button> -->
            </div>
        </header>

    <div class="controls">
        <label>📈 Number of Simulations: <input type="number" id="numStocks" value="100" min="10" max="500" oninput="validateInteger(this, 100, 500)" inputmode="numeric" pattern="[0-9]*"></label>
        <label>⏳ Time Period (Years): <input type="number" id="timePeriod" value="20" min="1" max="150" oninput="validateInteger(this, 1, 150)" inputmode="numeric" pattern="[0-9]*"></label>
        <label>💵 Initial Deposit: <span class="currency-symbol">$</span>
            <input type="number" id="initialPrice" value="1000" min="0" step="1000" oninput="validateInteger(this, 1, Infinity)" inputmode="numeric" pattern="[0-9]*">
        </label>
        <label>💰 Additional Deposit: <span class="currency-symbol">$</span><input type="number" id="depositAmount" value="50" min="0" step="50" oninput="validateInteger(this, 0, Infinity)" inputmode="numeric" pattern="[0-9]*"></label>
        <label>📅 Deposit Frequency:
            <select id="depositFrequency">
                <option value="daily">Daily</option>
                <option value="monthly" selected>Monthly</option>
                <option value="yearly">Yearly</option>
            </select>
        </label>
    </div>
    <div class="controls">
        <label>📈 Select Index:
            <select id="indexSelect" class="index-select">
                <option value="">Custom</option>
                <option value="S&P500">S&P 500</option>
                <option value="NASDAQ">NASDAQ</option>
                <option value="DOWJONES">DOW JONES</option>
                <option value="FTSE100">FTSE 100</option>
                <option value="DAX">DAX</option>
                <option value="CAC40">CAC 40</option>
                <option value="NIKKEI225">NIKKEI 225</option>
                <option value="SSE">SSE Composite</option>
                <option value="US10Y">US 10-Year Treasury</option>
                <option value="EU10Y">EU 10-Year Bond</option>
                <option value="JP10Y">Japan 10-Year Bond</option>
            </select>
        </label>
        <label>📊 Expected Return: <input type="number" id="mu" value="12" step="0.5" min="0" oninput="validateDecimal(this, 0, Infinity, 0)" inputmode="decimal" pattern="[0-9]*">%</label>
        <label>📉 Volatility: <input type="number" id="sigma" value="15" step="0.5" min="0" oninput="validateDecimal(this, 0, Infinity, 0)" inputmode="decimal" pattern="[0-9]*">%</label>
        <label>📈 Select Model:
            <select id="modelSelect" class="model-select">
                <option value="GBM">Geometric Brownian Motion (GBM)</option>
                <option value="Heston">Heston Stochastic Volatility Model</option>
                <option value="JumpDiffusion">Jump-Diffusion Model (Merton's Model)</option>
                <option value="MonteCarlo">Monte Carlo Simulation for Portfolio Risk</option>
                <option value="FamaFrench">Fama-French Factor Model</option>
            </select>
        </label>
    </div>
    <div class="center-button" style="margin-bottom: 20px;">
        <button onclick="simulate()">🔄 Run Simulation</button>
    </div>

    <div id="totalPortfolioValueContainer" style="display: none;">
        <div id="plot"></div>
    </div>
    
    <div id="plotContainer" style="display: none;">
        <div id="plot"></div>
    </div>
        
    <div id="performanceTableContainer" style="display: none;">
        <h2>📊 Performance Summary</h2>
        <table id="performanceTable">
            <thead>
                <tr>
                    <th>Year</th>
                    <th>Total Deposit</th>
                    <th class="tooltip">Optimistic Scenario</th>
                    <th class="tooltip highlight">Average Scenario</th>
                    <th class="tooltip">Pessimistic Scenario</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <div class="center-button" id="savePdfButton" style="display: none;">
        <button onclick="generatePDF()">📄 Save as PDF</button>
    </div>

    <div class="progress-container" id="progressContainer">
        <div class="progress-bar">
            <div class="progress-bar-fill" id="progressBarFill"></div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Risk-Dynamics. All rights reserved.</p>
        <p>This tool is intended for educational and informational purposes only. It does not provide financial, investment, or legal advice. The simulations and data presented are based on mathematical models and historical assumptions, which do not guarantee future performance. Users should conduct their own research and consult with a professional before making any financial or investment decisions. The creators of this tool are not responsible for any losses incurred from its use.</p>
    </footer>
    </div>
</body>
</html>
